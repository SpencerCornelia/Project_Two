<h2><%= @room.name %></h2>

<% if current_user == room_owner %>
<%= render partial: 'buttons/form', locals: {button: @button} %>
<% end %>

<% colors = ["blue_button", "yellow_button", "red_button"] %>

<% @room.buttons.each do |b| %>
	
	<% session[:button] = session[:button] || [] %>
	<% if session[:button].include?(b.id) then voted = "voted_button" %>
	<% else voted = "not_voted_button" %>
	<% end %>
	<% unless b.votes <= 0 %>
	
	<div class="button_container">
		<% if (b.votes <= 5) then varies = "red_button" %>
		<% elsif (b.votes > 5 and b.votes <= 15) then varies = "yellow_button" %>
		<% else varies = "blue_button" %>
		<% end %>
			<div data-button-id="<%= b.id %>" class="btn btn-sm btn-primary col-xs-3 room_buttons #{varies}">
				<div><%= b.condition %></div>
			<% if current_user == room_owner %>
			<%= b.votes %>
			</div>
			<div>
			<%= button_to "X", button_path(b), method: :delete, class: "btn btn-danger col-xs-1 delete_buttons" %>
			</div>

			<%= button_to "", {}, :disabled => true, class: "#{varies} btn col-xs-1 status_buttons" %>
			<% end %>
	</div>	
	<% end %>
<% end %>